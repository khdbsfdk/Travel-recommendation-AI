# Travel-recommendation-AI(여행 추천 Ai)
---
## 결과 영상
<img width="100%" src="https://user-images.githubusercontent.com/84302953/165410852-5105753b-f9d8-4ba5-9532-2d4e5a329a0d.mp4"/>

# 차례
- [프로젝트 개요](https://github.com/khdbsfdk/Travel-recommendation-AI/blob/main/README.md#%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EA%B0%9C%EC%9A%94)
- [프로젝트 수행 절차](https://github.com/khdbsfdk/Travel-recommendation-AI/blob/main/README.md#%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%88%98%ED%96%89-%EC%A0%88%EC%B0%A8---%EC%9B%B9)
  - [웹](https://github.com/khdbsfdk/Travel-recommendation-AI/blob/main/README.md#%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%88%98%ED%96%89-%EC%A0%88%EC%B0%A8---%EC%9B%B9)
  - [챗봇](https://github.com/khdbsfdk/Travel-recommendation-AI/blob/main/README.md#%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%88%98%ED%96%89-%EC%A0%88%EC%B0%A8---%EC%B1%97%EB%B4%87)
  - [추천 알고리즘](https://github.com/khdbsfdk/Travel-recommendation-AI/blob/main/README.md#%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%88%98%ED%96%89-%EC%A0%88%EC%B0%A8---%EC%B6%94%EC%B2%9C-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98)
- [참고 사이트](https://github.com/khdbsfdk/Travel-recommendation-AI/blob/main/README.md#%EC%B6%9C%EC%B2%98-%EB%B0%8F-%EC%B0%B8%EA%B3%A0-%EC%82%AC%EC%9D%B4%ED%8A%B8)
---
## 프로젝트 개요
#### (1)프로젝트 선정 및 선정 배경
- 보통 여행지 추천은 키워드로 추천하지만 본 프로젝트는 사용자의 요구를 대화로 받아 절차를 간소화하고 더 쉽게 여행지를 추천합니다.
#### (2)프로젝트 구현 내용
- 추천 알고리즘 -> 기계학습, 알고리즘 처리
- 챗봇 -> 자연어 처리
#### (3)프로젝트 의의
- 지금까지 받은 교육에서는 단순히 데이터 분석 및 모델 개발만 배웠다면 프로젝트를 통해 데이터 수집 및 전처리 능력을 더욱 향상 시킬 수 있습니다.
#### (4)개발 환경
- 코랩 or 주피터 노트북
#### (5)기대 효과
- 사용자가 직접 여행지를 고르지 않아도 여행지를 골라주어 편합니다. 또한, 사용자의 니즈가 잘 반영된다면 여행 만족도 상승 및 색다른 여행을 기대할 수 있습니다.
---
## 프로젝트 수행 절차 - 웹
- 웹은 플라스크로 구현하여 했으나 실패했습니다.
- 따라서 tkinter로 대체했습니다.

## 프로젝트 수행 절차 - 챗봇
#### (1) 챗봇을 사용한 이유
- 버튼이 아닌 대화를 통해 사용자에게 정보를 받아 여행지를 추천하고자 했습니다.
- 사용자가 직접 여행지를 고르지 않아도 **맞춤형**으로 여행지를 골라주어 **색다른 여행**이 가능합니다.
#### (2) 챗봇의 종류
- 저는 챗봇을 크게 2가지로 나누었습니다.
  1. 최대한 적은 대화로 사용자가 원하는 것을 이해하고 **해결**해주려는 목적을 가진 **문제 해결용 대화 시스템**
  2. 사용자가 어떠한 주제로 말을 걸면, 시스템에 맞는 답변을 하며 **대화**를 이어나가는 **자유 주제 대화 시스템**
- 본 프로젝트는 여행지 추천에 중점을 두었고, 간단한 인사만 가능한 챗봇을 목적으로 합니다.
- 따라서 문제 해결용 대화 위주의 챗봇을 제작했습니다.
#### (3) 챗봇 데이터 생성
- 참고할 데이터를 찾지 못하여 직접 생성했습니다.
- 사용한 코드는 다음과 같습니다.
``` python
dict_thema = {
            '관광 명소' : ['관광 명소', '리조트', '온천', '아쿠아리움', '제주시', '추자면', '조천읍', '구좌읍', '애월읍',
                       '한경면', '한림읍', '우도', '성산읍', '표선면', '남원읍', '서귀포시', '안덕면', '대정읍'],
            '주소' : [],
            '역사' : ['4.3', '너븐숭이', '문화', '문화 관광', '문화 유적지', '역사 유적지', '신나락 만나락', '사찰', '절', '토기', 
                        '제주4.3', '전통', '신화탐방로', '북촌'],
            '자연' : ['경관/포토', '생태', '생태문화', '야영장', '세계자연유산', '숲길', '캠핑장',' 일몰', '오름', '섬',
                        '일몰 명소', '일출', '제주 동백 수목원', '코스모스', '자연 경관', '유네스코', '산', '둘레길', '등산길',
                        '유채꽃', '폭포', '한옥', '캠핑', '해바라기', '계곡', '숲', '노천탕', '바다', '공원', '올레길',
                        '동굴', '글램핑', '동백나무', '동백', '매화', '억새','용천수', '휴양림', '자연'],
            '사진' : ['커플 스냅', '우정 스냅', '포토 스팟'],
            '도보' : ['도보','도보 여행', '마을 산책', '마을 관광', '산책로'],
            '예술' : ['미술관', '박물관', '미술', '미디어 아트', '예술', '아트', '전시', '행사',
                        '전시관', '전시와 행사', '뮤지컬', '연극'],
            '육상' : ['ATV', '골프', '산책', '걷기', '내창트레킹', '농촌 체험 마을', '드라이브', '동물 먹이주기', 
                        '등산', '레이싱', '메디컬 요가', '승마', '빈야사요가', '지질 트레일', '요가', 
                        '트레킹', '카트', '자전거', '체험', '체험관광', '체험여행', '테랍툴요가', 
                        '플라잉 요가','테마 파크', '테마 공원', '어트랙션', '체험전시'],
            '수상' : ['해변', '해수욕장', '수상 레저', '낚시', '물놀이', '수영장', '다이빙 체험', '마린 스포츠',
                    '스쿠버 다이빙', '스쿠버 교육', '액티비티', '차귀도 유람선', '해상 레저', '패들요가'],
            '공중' : ['라이딩'],
            '봄'   : ['벚꽃', '봄', '봄꽃'],
            '여름' : ['여름'],
            '가을' : ['가을', '단풍'],
            '겨울' : ['겨울'],
            '사계절' : ['사계절', '사계절'],
            '어린이' : ['아이들과', '애들과', '애들이랑', '애들 데리고'],
            '청년' : [],
            '중년' : [],
            '노년' : [],
            '혼자' : ['혼자서', '나 혼자서', '혼자', '홀로'],
            '친구' : ['친구들과', '친구와', '친구랑'],
            '커플' : ['애인과', '애인이랑', '여자 친구와', '남자 친구와', '여자 친구랑', '남자 친구랑'],
            '부모' : ['어머니와', '아버지와', '부모님과', '부모님과 함께'],
            '가족' : ['가족들과', '가족과']
}
people = ['가족들과', '가족과', '친구들과', '친구와', '친구랑', '애인과', '애인이랑', '여자 친구와',
          '남자 친구와', '여자 친구랑', '남자 친구랑', '부모님과', '부모님과 함께', '아이들과',
          '애들과', '애들이랑', '애들 데리고', '어머니와', '아버지와', '혼자서', '나 혼자서', '혼자', '홀로']
place = ['오름', '둘레길', '숲', '공원', '섬', '휴양림', '계곡', '산', '등산길', '해수욕장', '해변', '리조트',
        '온천', '폭포', '박물관', '아쿠아리움', '테마 파크', '전시관', '미술관', '관광 명소', '올레길', '행사',
        '야영장', '산책로', '일몰 명소', '수영장']
# 라벨 지정
def find_thema(word, dict_thema):
    dict_thema_list = ['관광 명소','역사', '자연', '사진', '도보', '예술', '육상', '수상', '공중', '봄', '여름',
                        '가을', '겨울', '사계절', '어린이', '혼자', '친구', '커플', '부모', '가족']
    for i in dict_thema_list:
        if word in dict_thema[i]:
            break
        else:
            continue
    return i

Q_data = []
key = []
# 예시1 -> {사람들과} 갈만한 {장소} 추천해줘
for p in people:
    for i in place:
        key_a = []
        sentence = f"{p} 갈만한 {i} 추천해줘"
        key_1 = find_thema(p, dict_thema)
        key_2 = find_thema(i, dict_thema)
        if key_1 != key_2:
            key_a.append(key_1)
            key_a.append(key_2)
        elif key_1 == key_2:
            key_a.append(key_1)
        Q_data.append(sentence)
        key.append(key_a)
print(Q_data)
print(key)
```
- 이렇게 생성하여 만든 데이터 예시 사진입니다.
<img width="100%" src="https://user-images.githubusercontent.com/84302953/165202738-472c6e1d-0cf9-4fc9-b6d1-b4a84e44ce46.png"/>

#### (4) 챗봇 학습 진행
- 제가 사용한 모델은 transformers의 bert입니다.
``` python
model = SentenceTransformer('sentence-transformers/xlm-r-100langs-bert-base-nli-stsb-mean-tokens')
```
- 저장한 챗봇 데이터 프레임에 임베딩 값을 구한 후 코사인 유사도를 구합니다.
<img width="100%" src="https://user-images.githubusercontent.com/84302953/165212133-f03b723b-d3e9-443d-9a0e-6c6d266dd420.png"/>

- 질문 문장을 넣으면 학습 문장 중 가장 유사한 문장을 찾아 답변합니다.
<img width="80%" src="https://user-images.githubusercontent.com/84302953/165212338-c943ad19-318f-4ed3-bc38-e0bd1c7dbf46.png"/>

## 프로젝트 수행 절차 - 추천 알고리즘
#### (1) 데이터 수집
- [데이터는 한국 관광 데이터랩에서 가져왔으며, 필요한 추가 정보는 visit jeju사이트에서 크롤링했습니다.](https://colab.research.google.com/drive/1EzFI03uDONkWwgk0zRkL_5I8fnkUSdk8#scrollTo=54fd38cc)
#### (2) 데이터 선정
- 본 프로젝트에서는 사용자가 원하는 **테마**의 관광지이므로, 관광지 정보와 테마 **태그 값**이 필요합니다.
- 따라서 크롤링 시 명소 이름, 주소, 테마를 저장합니다.
<img width="100%" src="https://user-images.githubusercontent.com/84302953/165223874-3300f74a-3b2c-4ecc-b71e-af272a61012c.png"/>

#### (3) 데이터 정제
- 비슷한 의미의 태그는 묶어서 하나의 테마로 만듭니다.
- 예를들어 "아이"와 "어린이"는 '어린이'라는 하나의 단어로 묶습니다.
<img width="100%" src="https://user-images.githubusercontent.com/84302953/165226576-751c3a16-d253-4118-9fc2-929182fa84f3.png"/>

- 이후 테마에 해당하는 태그의 개수를 세어 데이터 프레임을 만듭니다.
<img width="80%" src="https://user-images.githubusercontent.com/84302953/165227200-9c784d85-7678-4980-a968-249363d87075.png"/>

#### (4) [모델 선정(ALS: Alternating Least Squares)](https://yeomko.tistory.com/8?category=805638)
- 추천 알고리즘으로 ALS를 선택했습니다.
- **ALS 알고리즘** : 행렬 분해를 최적화하는 잠재 요인의 유저 협업 필터링 기반의 추천 알고리즘으로서, loss function이 최소가 되는 행렬 x, y를 추출하는데 목적을 가진 알고리즘.
- ALS 알고리즘을 **선택한 이유** : 사용자가 선택하지 않은 테마에 대해서 유의미한 영향을 끼치지 않는다라고 판단하는 것은 옳지 않다고 생각했습니다. 따라서 선택하지 않은 태그, 잠재 요인도 고려하여 사용자가 선택한 테마에 가장 적합한 장소를 추천하기 위해 선정하게 되었습니다.

#### (5) 알고리즘 수행
- 입력 데이터 + 학습 데이터 ALS 행렬 연산 수행
- 입력 데이터와 학습 데이터 간의 코사인 유사도 연산 수행
- 코사인 유사도를 기준으로 상위 10개의 데이터(행 인덱스 번호, 행렬) 추출
- 입력 데이터와의 태그 부합 개수를 기준으로 랭크 정렬
- 상위 n 개의 관광지 명과 상세 주소 출력
<img width="60%" src="https://user-images.githubusercontent.com/84302953/165258890-c627432a-a253-4730-bf7c-eb80856bebb0.png"/>

## 개선 할 사항
- 챗봇 및 지도 그림을 이용한 여행지 시각화 웹 페이지 구현
- 추천 알고리즘 속도 개선
- 더욱 다양한 대화가 가능한 챗봇, 실시간 날씨 정보 표시

## 출처 및 참고 사이트
- 관광 데이터 -> [비짓 제주](https://www.visitjeju.net/kr/), [한국 관광 데이터랩](https://datalab.visitkorea.or.kr/datalab/portal/main/getMainForm.do)
- 챗봇 -> [송영숙님 깃허브](https://github.com/songys/Chatbot_data), [트랜스포머를 이용한 한국어 챗봇](https://wikidocs.net/89786)
- 추천 알고리즘 구현 -> [갈아먹는 머신러닝](https://yeomko.tistory.com/4?category=805638)
